FROM alpine:3.21

RUN apk add --no-cache tinyproxy

COPY tinyproxy.conf /etc/tinyproxy/tinyproxy.conf
COPY egress-entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

USER nobody
EXPOSE 8888

ENTRYPOINT ["/entrypoint.sh"]
